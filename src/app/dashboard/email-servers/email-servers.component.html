<div fxLayout="column" class="dash-container">
  <div>
    <h3 class="mat-display-3">Gestionar Servidores de Email</h3>
  </div>
  <div class="table-container mat-elevation-z8">
    <div fxLayout="row" fxLayoutAlign="end baseline">
      <button mat-fab (click)="createEmail()">
        <mat-icon>add</mat-icon>
      </button>
    </div>
    <mat-table class="table" [dataSource]="emailsData">
      <ng-container matColumnDef="user">
        <th fxFlex="100%" mat-header-cell *matHeaderCellDef> Usuario </th>
        <td fxFlex="100%" mat-cell *matCellDef="let row" (click)="openEmail(row.id)"> {{row.user}} </td>
      </ng-container>
      <ng-container matColumnDef="email">
        <th fxFlex="100%" mat-header-cell *matHeaderCellDef> Email </th>
        <td fxFlex="100%" mat-cell *matCellDef="let row" (click)="openEmail(row.id)"> {{row.email}} </td>
      </ng-container>
      <ng-container matColumnDef="password">
        <th fxFlex="100%" mat-header-cell *matHeaderCellDef> Contraseña </th>
        <td fxFlex="100%" mat-cell *matCellDef="let row" (click)="openEmail(row.id)"> {{row.password}} </td>
      </ng-container>
      <ng-container matColumnDef="smtp_address">
        <th fxFlex="100%" mat-header-cell *matHeaderCellDef> Dirección SMTP </th>
        <td fxFlex="100%" mat-cell *matCellDef="let row" (click)="openEmail(row.id)">
          {{ row.smtp_address }}
        </td>
      </ng-container>
      <ng-container matColumnDef="port">
        <th fxFlex="100%" mat-header-cell *matHeaderCellDef> Puerto </th>
        <td fxFlex="100%" mat-cell *matCellDef="let row" (click)="openEmail(row.id)">
          {{ row.port }}
        </td>
      </ng-container>
      <ng-container matColumnDef="actions">
        <th fxFlex="100%" mat-header-cell *matHeaderCellDef> Acciones </th>
        <td fxFlex="100%" mat-cell *matCellDef="let row">
          <button mat-icon-button *ngIf="row.is_active" matTooltip="Eliminar servidor" (click)="onDelete(row.id)">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr fxLayout="row" fxLayoutAlign="space-between" mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        fxLayout="row"
        fxLayoutAlign="space-between"
        matRipple
        [matRippleColor]="'light-grey'"
        mat-row
        *matRowDef="let row; columns: displayedColumns;"
      ></tr>
    </mat-table>
  </div>
</div>
